<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Industrial GC Intelligence Portal</title>

  <!-- Tailwind CDN (simple + reliable) -->
  <script src="https://cdn.tailwindcss.com"></script>

  <style>
    /* Small polish */
    .glass { background: rgba(255,255,255,0.8); backdrop-filter: blur(10px); }
    .mono { font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace; }
  </style>
</head>

<body class="bg-slate-50 text-slate-900">

  <!-- Header -->
  <header class="bg-slate-950 text-white">
    <div class="max-w-6xl mx-auto px-4 py-10">
      <div class="flex flex-col gap-4 md:flex-row md:items-end md:justify-between">
        <div>
          <p class="text-xs uppercase tracking-widest text-slate-300">Industrial Intelligence • Pre-Bid Positioning</p>
          <h1 class="text-3xl md:text-4xl font-extrabold mt-2">Industrial GC Intelligence Portal</h1>
          <p class="text-slate-300 mt-2 max-w-2xl">
            Early-stage project signals and decision-maker targeting across Louisiana — before projects hit public bid boards.
          </p>
        </div>

        <div class="flex gap-3">
          <a href="#pricing" class="inline-flex items-center justify-center rounded-lg px-5 py-3 font-semibold bg-white text-slate-950 hover:bg-slate-200 transition">
            View Pricing
          </a>
          <a href="#engine" class="inline-flex items-center justify-center rounded-lg px-5 py-3 font-semibold bg-orange-500 hover:bg-orange-400 transition">
            Run Engine
          </a>
        </div>
      </div>
    </div>
  </header>

  <!-- Live Bar -->
  <section class="bg-slate-900 text-white text-sm">
    <div class="max-w-6xl mx-auto px-4 py-3 flex flex-wrap items-center justify-center gap-6">
      <span class="text-green-400 font-semibold">● LIVE SIGNAL ENGINE</span>
      <span class="text-slate-200">Louisiana Industrial Market</span>
      <span id="lastUpdated" class="text-slate-200">Last Updated: Today</span>
    </div>
  </section>

  <!-- KPI Strip -->
  <section class="bg-white border-b border-slate-200">
    <div class="max-w-6xl mx-auto px-4 py-6">
      <div class="grid grid-cols-2 md:grid-cols-4 gap-4 text-center">
        <div class="rounded-xl bg-slate-50 border border-slate-200 p-4">
          <p class="text-xs uppercase tracking-wider text-slate-500 font-semibold">Active Signals</p>
          <p class="text-2xl font-extrabold mt-1">12</p>
          <p class="text-xs text-slate-500">last 14 days</p>
        </div>
        <div class="rounded-xl bg-slate-50 border border-slate-200 p-4">
          <p class="text-xs uppercase tracking-wider text-slate-500 font-semibold">Opportunity Window</p>
          <p class="text-2xl font-extrabold mt-1">3–6</p>
          <p class="text-xs text-slate-500">months pre-bid</p>
        </div>
        <div class="rounded-xl bg-slate-50 border border-slate-200 p-4">
          <p class="text-xs uppercase tracking-wider text-slate-500 font-semibold">Decision Makers</p>
          <p class="text-2xl font-extrabold mt-1">48</p>
          <p class="text-xs text-slate-500">identified targets</p>
        </div>
        <div class="rounded-xl bg-slate-50 border border-slate-200 p-4">
          <p class="text-xs uppercase tracking-wider text-slate-500 font-semibold">Scope Filter</p>
          <p class="text-2xl font-extrabold mt-1">$250K+</p>
          <p class="text-xs text-slate-500">industrial focus</p>
        </div>
      </div>
    </div>
  </section>

  <main class="max-w-6xl mx-auto px-4 py-10">

    <!-- Trust Strip -->
    <section class="rounded-2xl glass border border-slate-200 p-6 md:p-8 mb-8">
      <p class="text-xs uppercase tracking-widest text-slate-500 font-semibold text-center">
        Used for early project positioning by
      </p>
      <div class="mt-4 flex flex-wrap justify-center gap-3 text-sm font-semibold text-slate-700">
        <span class="px-3 py-2 bg-white rounded-full border">Industrial Contractors</span>
        <span class="px-3 py-2 bg-white rounded-full border">EPC Firms</span>
        <span class="px-3 py-2 bg-white rounded-full border">Revenue Growth Teams</span>
        <span class="px-3 py-2 bg-white rounded-full border">Project Intelligence Operators</span>
      </div>
    </section>

    <!-- How it works -->
    <section class="bg-white rounded-2xl border border-slate-200 p-6 md:p-10 mb-8">
      <h2 class="text-2xl font-extrabold">How It Works</h2>
      <div class="grid md:grid-cols-2 gap-8 mt-6">
        <ul class="space-y-3 text-slate-700">
          <li>• Daily monitoring of permits, utility activity, industrial expansion signals</li>
          <li>• Filters opportunities that indicate spend intent (not hype)</li>
          <li>• Maps likely decision-makers for early positioning</li>
          <li>• Delivers a short executive summary + actionable outreach angles</li>
        </ul>
        <div class="rounded-xl bg-slate-50 border border-slate-200 p-5">
          <p class="text-sm font-semibold text-slate-900">What you get weekly</p>
          <ul class="mt-3 space-y-2 text-sm text-slate-700">
            <li>• Qualified Signals (pre-bid)</li>
            <li>• Evidence + links</li>
            <li>• Likely scope (switchgear, controls, distribution, etc.)</li>
            <li>• Titles that sign checks</li>
            <li>• Positioning angle + next steps</li>
          </ul>
        </div>
      </div>
    </section>

    <!-- Outcomes stack -->
    <section class="bg-slate-950 text-white rounded-2xl p-8 md:p-10 mb-8">
      <h2 class="text-2xl md:text-3xl font-extrabold text-center">Revenue Outcomes, Not Just Data</h2>
      <div class="grid md:grid-cols-3 gap-6 mt-8">
        <div class="rounded-xl bg-white/5 border border-white/10 p-6">
          <h3 class="text-xl font-bold">Earlier Visibility</h3>
          <p class="text-slate-300 mt-2">Find opportunities before projects become crowded and competitive.</p>
        </div>
        <div class="rounded-xl bg-white/5 border border-white/10 p-6">
          <h3 class="text-xl font-bold">Stronger Margins</h3>
          <p class="text-slate-300 mt-2">Position earlier where strategy matters more than price pressure.</p>
        </div>
        <div class="rounded-xl bg-white/5 border border-white/10 p-6">
          <h3 class="text-xl font-bold">Predictable Pipeline</h3>
          <p class="text-slate-300 mt-2">Build consistency with repeatable intelligence and outreach execution.</p>
        </div>
      </div>
    </section>

    <!-- Executive Summary Preview -->
    <section class="bg-white rounded-2xl border border-slate-200 p-6 md:p-10 mb-8">
      <h2 class="text-2xl font-extrabold text-center">Executive Summary Preview</h2>
      <div class="mt-6 rounded-xl bg-slate-50 border border-slate-200 p-6">
        <p class="text-xs uppercase tracking-widest text-slate-500 font-semibold">Sample daily snapshot</p>
        <div class="mt-4 space-y-3 text-slate-800">
          <p><span class="font-bold">Signal Detected:</span> Industrial facility expansion filing — Baton Rouge area</p>
          <p><span class="font-bold">Opportunity Window:</span> 4–6 months before public bidding phase</p>
          <p><span class="font-bold">Likely Scope:</span> Switchgear upgrades, distribution expansion, controls integration</p>
          <p><span class="font-bold">Decision-Maker Layer:</span> Facilities Director • EPC PM • Engineering Lead</p>
          <p><span class="font-bold">Revenue Angle:</span> Early positioning creates higher-margin engagement before crowded bids</p>
        </div>
      </div>
    </section>

    <!-- Territory Exclusivity -->
    <section class="bg-orange-50 border border-orange-200 rounded-2xl p-6 md:p-10 mb-8 text-center">
      <h2 class="text-2xl font-extrabold text-orange-900">Territory Exclusivity</h2>
      <p class="text-slate-700 mt-3 max-w-2xl mx-auto">
        To protect competitive advantage, access is limited to <span class="font-extrabold">one client per territory</span>.
        Once a territory is active, additional access is closed.
      </p>
      <div class="mt-6 flex flex-wrap justify-center gap-3 text-sm font-semibold">
        <span class="bg-white px-4 py-2 rounded-full border border-orange-200">Baton Rouge • Available</span>
        <span class="bg-white px-4 py-2 rounded-full border border-orange-200">Lafayette • Available</span>
        <span class="bg-white px-4 py-2 rounded-full border border-orange-200">Lake Charles • Available</span>
        <span class="bg-white px-4 py-2 rounded-full border border-orange-200">New Orleans • Available</span>
      </div>
    </section>

    <!-- Who this is for -->
    <section class="bg-white rounded-2xl border border-slate-200 p-6 md:p-10 mb-8">
      <h2 class="text-2xl font-extrabold text-center">Who This Is For</h2>
      <div class="grid md:grid-cols-2 gap-6 mt-6">
        <div class="rounded-xl border border-slate-200 p-6">
          <h3 class="text-xl font-extrabold">Ideal Fit</h3>
          <ul class="mt-4 space-y-2 text-slate-700">
            <li>• Commercial / industrial focused firms (GCs, Electrical, HVAC, Plumbing)</li>
            <li>• 5–50 employees</li>
            <li>• Wants predictable pipeline + margin protection</li>
            <li>• Capacity for $250K+ scopes</li>
            <li>• Owner/Director wants an edge before public bids</li>
          </ul>
        </div>
        <div class="rounded-xl border border-slate-200 bg-slate-50 p-6">
          <h3 class="text-xl font-extrabold">Not a Fit</h3>
          <ul class="mt-4 space-y-2 text-slate-700">
            <li>• Wants cheap “lead lists” with no project context</li>
            <li>• Only chasing public bid boards and lowest-price work</li>
            <li>• No capacity to pursue new opportunities in 30–60 days</li>
            <li>• Wants broad advice instead of actionable intelligence</li>
          </ul>
        </div>
      </div>
      <p class="text-center text-slate-600 mt-6">
        Built for firms that want <span class="font-bold">earlier visibility</span>, stronger positioning, and <span class="font-bold">revenue consistency</span>.
      </p>
    </section>

    <!-- Pricing -->
    <section id="pricing" class="bg-white rounded-2xl border border-slate-200 p-6 md:p-10 mb-8">
      <h2 class="text-2xl font-extrabold text-center">Pricing</h2>
      <p class="text-slate-600 text-center mt-2">Start with a pilot. Upgrade when you want territory lock + weekly delivery.</p>

      <div class="grid md:grid-cols-3 gap-6 mt-8">
        <div class="rounded-2xl border border-slate-200 p-6">
          <h3 class="text-lg font-extrabold">Pilot</h3>
          <p class="text-3xl font-extrabold mt-2">$750</p>
          <p class="text-sm text-slate-500">14 days</p>
          <ul class="mt-4 space-y-2 text-slate-700 text-sm">
            <li>• 3–5 qualified signals</li>
            <li>• Evidence + links</li>
            <li>• Likely scope notes</li>
            <li>• Decision-maker titles</li>
          </ul>
          <a href="#engine" class="mt-6 inline-flex w-full justify-center rounded-lg bg-slate-900 text-white py-3 font-semibold hover:bg-slate-700 transition">
            Start Pilot
          </a>
        </div>

        <div class="rounded-2xl border-2 border-orange-400 p-6 shadow-sm">
          <div class="flex items-center justify-between">
            <h3 class="text-lg font-extrabold">Territory Standard</h3>
            <span class="text-xs font-bold bg-orange-100 text-orange-900 px-3 py-1 rounded-full">Most Popular</span>
          </div>
          <p class="text-3xl font-extrabold mt-2">$1,500<span class="text-base font-semibold">/mo</span></p>
          <ul class="mt-4 space-y-2 text-slate-700 text-sm">
            <li>• Weekly intelligence delivery</li>
            <li>• Territory exclusivity (1 area)</li>
            <li>• Prioritized signal scoring</li>
            <li>• Outreach angles included</li>
          </ul>
          <a href="#engine" class="mt-6 inline-flex w-full justify-center rounded-lg bg-orange-500 text-white py-3 font-semibold hover:bg-orange-400 transition">
            Lock Territory
          </a>
        </div>

        <div class="rounded-2xl border border-slate-200 p-6">
          <h3 class="text-lg font-extrabold">Enterprise</h3>
          <p class="text-3xl font-extrabold mt-2">$3,500<span class="text-base font-semibold">/mo</span></p>
          <ul class="mt-4 space-y-2 text-slate-700 text-sm">
            <li>• Multiple territories</li>
            <li>• Higher-frequency monitoring</li>
            <li>• Priority support</li>
            <li>• Custom filters + scopes</li>
          </ul>
          <a href="#engine" class="mt-6 inline-flex w-full justify-center rounded-lg bg-slate-900 text-white py-3 font-semibold hover:bg-slate-700 transition">
            Request Enterprise
          </a>
        </div>
      </div>
    </section>

    <!-- Reviews -->
    <section class="bg-white rounded-2xl border border-slate-200 p-6 md:p-10 mb-8">
      <h2 class="text-2xl font-extrabold text-center">Reviews</h2>
      <div class="grid md:grid-cols-3 gap-6 mt-8">
        <div class="rounded-xl bg-slate-50 border border-slate-200 p-6">
          <p class="text-slate-800 font-semibold">“We stopped finding projects too late. The timing advantage is real.”</p>
          <p class="text-sm text-slate-500 mt-3">— Operations Director (Industrial GC)</p>
        </div>
        <div class="rounded-xl bg-slate-50 border border-slate-200 p-6">
          <p class="text-slate-800 font-semibold">“The report is short, actionable, and points to who actually decides.”</p>
          <p class="text-sm text-slate-500 mt-3">— Owner (Commercial Contractor)</p>
        </div>
        <div class="rounded-xl bg-slate-50 border border-slate-200 p-6">
          <p class="text-slate-800 font-semibold">“We moved from chasing bids to getting in early. That changed margins.”</p>
          <p class="text-sm text-slate-500 mt-3">— Estimating Lead (Industrial)</p>
        </div>
      </div>
      <p class="text-xs text-slate-500 mt-6 text-center">*Sample testimonials shown for layout. Replace with real reviews when available.</p>
    </section>

    <!-- Engine -->
    <section id="engine" class="bg-white rounded-2xl border border-slate-200 p-6 md:p-10">
      <div class="flex flex-col gap-6 md:flex-row md:items-center md:justify-between">
        <div>
          <h2 class="text-2xl font-extrabold">Generate Today’s Report</h2>
          <p class="text-slate-600 mt-2">Runs the intelligence prompt and returns an actionable report.</p>
        </div>

        <div class="flex flex-col md:flex-row gap-3">
          <select id="parishSelect" class="border rounded-lg px-4 py-3 w-full md:w-72">
            <option value="Statewide">Statewide</option>
            <option value="East Baton Rouge">East Baton Rouge</option>
            <option value="Jefferson">Jefferson</option>
            <option value="Orleans">Orleans</option>
            <option value="Lafayette">Lafayette</option>
            <option value="Calcasieu">Calcasieu</option>
            <option value="St. Tammany">St. Tammany</option>
          </select>

          <button id="runPromptBtn" class="bg-slate-950 text-white px-6 py-3 rounded-lg hover:bg-slate-800 transition font-bold">
            Run Intelligence Engine
          </button>
        </div>
      </div>

      <p id="statusMessage" class="mt-4 text-slate-700"></p>

      <div class="mt-6">
        <div class="flex items-center justify-between gap-3 flex-wrap">
          <p class="text-sm text-slate-500">Output</p>
          <div class="flex gap-2">
            <button id="saveBtn" class="px-4 py-2 rounded-lg border border-slate-200 bg-white hover:bg-slate-50 text-sm font-semibold">Save</button>
            <button id="downloadBtn" class="px-4 py-2 rounded-lg border border-slate-200 bg-white hover:bg-slate-50 text-sm font-semibold">Download .txt</button>
          </div>
        </div>

        <pre id="reportOutput" class="mt-3 bg-slate-950 text-slate-100 p-4 rounded-xl overflow-x-auto text-sm whitespace-pre-wrap mono min-h-[160px]"></pre>
      </div>
    </section>

    <footer class="text-center text-slate-500 text-sm py-10">
      © 2026 Industrial Intelligence LLC • Built for early positioning
    </footer>

  </main>

  <script>
    // Make "Last Updated" real
    const lu = document.getElementById('lastUpdated');
    if (lu) {
      const d = new Date();
      lu.textContent = `Last Updated: ${d.toLocaleDateString()} ${d.toLocaleTimeString([], {hour:'2-digit', minute:'2-digit'})}`;
    }

    const basePrompt = `
ROLE:
You are an industrial project intelligence analyst specializing in early-stage commercial and industrial opportunities.

OBJECTIVE:
Identify early-stage project signals in Louisiana that indicate upcoming industrial scope before the project reaches public bid boards.

SIGNAL SOURCES TO USE (prioritize):
- permits/filings (construction, zoning, environmental, utilities)
- utility planning/interconnection activity
- public agency procurement patterns
- industrial expansion announcements
- port/logistics upgrades
- DEQ filings involving load increases

FILTER RULES:
Only include signals that meet at least 2:
- indicates spending intent
- identifiable decision-makers
- early-stage / under-discussed
- creates urgency / time advantage

OUTPUT FORMAT:
Return a structured report with these headings:
1) Signal Detected
2) Evidence (include links if known; if unknown say "Not Found")
3) Opportunity Window
4) Ideal Buyer (job titles)
5) Monetization Strategy
6) First 30-Day Action Plan

TARGET AREA:
{{PARISH}}
`;

    const btn = document.getElementById('runPromptBtn');
    const statusMessage = document.getElementById('statusMessage');
    const reportOutput = document.getElementById('reportOutput');
    const parishSelect = document.getElementById('parishSelect');

    const saveBtn = document.getElementById('saveBtn');
    const downloadBtn = document.getElementById('downloadBtn');

    function buildPrompt() {
      const parish = parishSelect?.value || "Statewide";
      return basePrompt.replace("{{PARISH}}", parish);
    }

    function getStoredReports() {
      return JSON.parse(localStorage.getItem("savedReports") || "[]");
    }
    function setStoredReports(items) {
      localStorage.setItem("savedReports", JSON.stringify(items));
    }

    saveBtn?.addEventListener('click', () => {
      const report = reportOutput.textContent.trim();
      if (!report) { statusMessage.textContent = "Nothing to save yet — run the engine first."; return; }
      const item = { savedAt: new Date().toISOString(), parish: parishSelect.value, report };
      const all = [item, ...getStoredReports()].slice(0, 20);
      setStoredReports(all);
      statusMessage.textContent = "Saved locally on this device.";
    });

    downloadBtn?.addEventListener('click', () => {
      const report = reportOutput.textContent.trim();
      if (!report) { statusMessage.textContent = "Nothing to download yet — run the engine first."; return; }
      const blob = new Blob([report], { type: "text/plain;charset=utf-8" });
      const url = URL.createObjectURL(blob);
      const a = document.createElement("a");
      a.href = url;
      a.download = `intel-${(parishSelect.value || 'statewide').replace(/\s+/g,'-').toLowerCase()}.txt`;
      document.body.appendChild(a);
      a.click();
      a.remove();
      URL.revokeObjectURL(url);
    });

    btn?.addEventListener('click', async () => {
      statusMessage.textContent = "Generating report...";
      reportOutput.textContent = "";

      try {
        const res = await fetch("/.netlify/functions/run-prompt", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ prompt: buildPrompt() })
        });

        if (!res.ok) throw new Error(`HTTP ${res.status}`);
        const data = await res.json();

        reportOutput.textContent = data.report || "No output returned.";
        statusMessage.textContent = "Report generated successfully!";
      } catch (e) {
        console.error(e);
        statusMessage.textContent = "Error generating report. (Check Netlify function + API key)";
        reportOutput.textContent = String(e);
      }
    });
  </script>

</body>
</html>
