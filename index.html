<!doctype html>
<html lang="en">
<head>
  <body class="bg-gray-50 font-sans">
<!-- HEADER -->
<header class="bg-blue-900 text-white py-6 shadow-md">
  <div class="container mx-auto text-center">
    <h1 class="text-3xl font-bold">Industrial GC Intelligence Portal</h1>
    <p class="mt-2 text-lg">
      Early Project Signals for Industrial General Contractors
    </p>
  </div>
</header>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Industrial GC Intelligence Portal</title>
</head><section class="bg-white p-8 rounded-lg shadow-md mb-8">
  <h2 class="text-2xl font-semibold mb-4 text-center">Who This Is For</h2>

  <div class="grid md:grid-cols-2 gap-8">
    <!-- Left: Ideal -->
    <div class="border border-gray-200 rounded-lg p-6">
      <h3 class="text-xl font-bold mb-3 text-gray-900">Ideal Fit</h3>
      <ul class="list-disc list-inside space-y-2 text-gray-700">
        <li><strong>Commercial / Industrial</strong> focused Electrical, HVAC, Plumbing, or Industrial GCs</li>
        <li><strong>5–50 employees</strong> (growing team, not a solo operator)</li>
        <li>Wants <strong>predictable pipeline</strong> and stronger margins</li>
        <li>Has capacity to take on <strong>$250K+</strong> project scope</li>
        <li>Owner/Director wants an edge <strong>before public bids</strong></li>
      </ul>
    </div>

    <!-- Right: Not for -->
    <div class="border border-gray-200 rounded-lg p-6 bg-gray-50">
      <h3 class="text-xl font-bold mb-3 text-gray-900">Not a Fit</h3>
      <ul class="list-disc list-inside space-y-2 text-gray-700">
        <li>Looking for cheap “lead lists” with no project context</li>
        <li>Only chasing <strong>public bid boards</strong> and lowest-price work</li>
        <li>No capacity to pursue new opportunities in the next 30–60 days</li>
        <li>Wants broad advice instead of <strong>actionable project intelligence</strong></li>
      </ul>
    </div>
  </div>

  <!-- Quick CTA line (no salesy CTA) -->
  <p class="mt-6 text-center text-gray-600">
    Built for firms that want <strong>earlier visibility</strong>, stronger positioning, and <strong>revenue consistency</strong>.
  </p>
</section>
<section class="bg-white border-b border-gray-200 py-4">
  <div class="container mx-auto text-center">
    <p class="text-sm uppercase tracking-wider text-gray-500 font-semibold">
      Used for Early Project Positioning By
    </p>

    <div class="mt-3 flex flex-wrap justify-center gap-6 text-gray-600 font-medium text-sm">
      <span>Industrial Contractors</span>
      <span>•</span>
      <span>EPC Firms</span>
      <span>•</span>
      <span>Revenue Growth Teams</span>
      <span>•</span>
      <span>Project Intelligence Operators</span>
    </div>
  </div>
</section>
<body style="font-family: Arial; padding: 20px;">


  

  <button onclick="runEngine()" style="padding:12px 16px; font-size:16px;">
    Run Intelligence Engine
  </button>

  <p id="status"></p>
  <div id="output" style="background:#f2f2f2; padding:12px; white-space:pre-wrap;"></div>

  <script>
    <script>
  const basePrompt = `
AUTONOMOUS INDUSTRIAL GC REVENUE INTELLIGENCE ENGINE
ROLE: You are an autonomous B2B Revenue Intelligence Engine.
MISSION: Generate daily, pre-bid industrial project signals above $250,000.

OUTPUT REQUIREMENTS:
- Signal Detected
- Evidence (with links)
- Opportunity Window
- Ideal Buyer (job titles)
- Monetization Strategy
- First 30-Day Action Plan

RULES:
- Only include early-stage, revenue-ready signals
- No guessing. If unknown, say Not Found.
- Prioritize Louisiana.

TARGET AREA:
{{PARISH}}
`;

  const btn = document.getElementById('runPromptBtn');
  const statusMessage = document.getElementById('statusMessage');
  const reportOutput = document.getElementById('reportOutput');
  const parishSelect = document.getElementById('parishSelect');
  const metaLine = document.getElementById('metaLine');

  const saveBtn = document.getElementById('saveBtn');
  const downloadBtn = document.getElementById('downloadBtn');
  const emailInput = document.getElementById('emailInput');

  function nowStamp() {
    const d = new Date();
    return d.toLocaleString();
  }

  function buildPrompt() {
    const parish = parishSelect.value || "Statewide";
    return basePrompt.replace("{{PARISH}}", parish);
  }

  function setMeta(text) {
    metaLine.textContent = text;
  }

  function getStoredReports() {
    return JSON.parse(localStorage.getItem("savedReports") || "[]");
  }

  function setStoredReports(items) {
    localStorage.setItem("savedReports", JSON.stringify(items));
  }

  saveBtn.addEventListener('click', () => {
    const report = reportOutput.textContent.trim();
    if (!report) {
      statusMessage.textContent = "Nothing to save yet — run the engine first.";
      return;
    }
    const item = {
      savedAt: new Date().toISOString(),
      parish: parishSelect.value,
      report
    };
    const all = [item, ...getStoredReports()].slice(0, 20); // keep last 20
    setStoredReports(all);
    statusMessage.textContent = "Saved. (Stored locally on this device)";
  });

  downloadBtn.addEventListener('click', () => {
    const report = reportOutput.textContent.trim();
    if (!report) {
      statusMessage.textContent = "Nothing to download yet — run the engine first.";
      return;
    }
    const blob = new Blob([report], { type: "text/plain;charset=utf-8" });
    const url = URL.createObjectURL(blob);
    const a = document.createElement("a");
    a.href = url;
    a.download = `gc-intel-${parishSelect.value.replace(/\s+/g,'-').toLowerCase()}.txt`;
    document.body.appendChild(a);
    a.click();
    a.remove();
    URL.revokeObjectURL(url);
  });

  btn.addEventListener('click', async () => {
    statusMessage.textContent = 'Generating report...';
    reportOutput.textContent = '';
    const parish = parishSelect.value || "Statewide";
    setMeta(`Area: ${parish} • Generated: ${nowStamp()}`);

    try {
      const response = await fetch('/.netlify/functions/run-prompt', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ prompt: buildPrompt() })
      });

      if (!response.ok) throw new Error(`HTTP ${response.status}`);
      const data = await response.json();

      reportOutput.textContent = data.report || 'No output returned.';
      statusMessage.textContent = 'Report generated successfully!';

      // OPTIONAL: if email provided, call your future email function
      const email = emailInput.value.trim();
      if (email) {
        // Placeholder — you can add a Netlify function later: /.netlify/functions/send-report
        // await fetch('/.netlify/functions/send-report', { method:'POST', headers:{'Content-Type':'application/json'}, body: JSON.stringify({ email, report: data.report, parish }) });
      }
    } catch (error) {
      console.error(error);
      statusMessage.textContent = 'Error generating report. Check console.';
    }
  });
</script>
    
  </script>
</body>
</html>
